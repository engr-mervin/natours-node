{"mappings":"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","sources":["<anon>","public/js/index.js","public/js/login.js","public/js/alerts.js","public/js/leaflet.js","public/js/error.js","public/js/updateInfo.js","public/js/stripe.js"],"sourcesContent":["let $7dc87b7f457e655a$var$scheduledHide;\nconst $7dc87b7f457e655a$export$516836c6a9dfc573 = function() {\n    var _alertElement_parentElement;\n    const alertElement = document.querySelector(\".alert\");\n    if (alertElement) (_alertElement_parentElement = alertElement.parentElement) === null || _alertElement_parentElement === void 0 ? void 0 : _alertElement_parentElement.removeChild(alertElement);\n};\nconst $7dc87b7f457e655a$export$de026b00723010c1 = function(type, message) {\n    var _document_querySelector;\n    if ($7dc87b7f457e655a$var$scheduledHide) clearTimeout($7dc87b7f457e655a$var$scheduledHide);\n    $7dc87b7f457e655a$export$516836c6a9dfc573();\n    const markup = `<div class=\"alert alert--${type}\">${message}</div>`;\n    (_document_querySelector = document.querySelector(\"body\")) === null || _document_querySelector === void 0 ? void 0 : _document_querySelector.insertAdjacentHTML(\"afterbegin\", markup);\n    $7dc87b7f457e655a$var$scheduledHide = setTimeout(()=>{\n        $7dc87b7f457e655a$export$516836c6a9dfc573();\n    }, 1500);\n};\nconst $7dc87b7f457e655a$export$99f7da01d5165667 = async function(func, ...argsInput) {\n    try {\n        $7dc87b7f457e655a$export$de026b00723010c1(\"success\", \"Please wait...\");\n        return await func(...argsInput);\n    } catch (error) {\n        $7dc87b7f457e655a$export$de026b00723010c1(\"error\", error.message);\n    }\n};\n\n\nconst $bf5b431e6a69fea8$export$596d806903d1f59e = async function(email, password) {\n    const body = JSON.stringify({\n        email: email || \"\",\n        password: password || \"\"\n    });\n    const loginRequest = await fetch(`${process.env.DEV_URL}/api/v1/users/login`, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: body\n    });\n    const loginResult = await loginRequest.json();\n    if (loginResult.error) throw loginResult;\n    (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"success\", \"Logged in successfully\");\n    setTimeout(()=>{\n        window.location.href = `${process.env.DEV_URL}/`;\n    }, 1500);\n//   document.cookie = `token=${loginResult.token}; path=/;`;\n};\n\n\nconst $b65541e07a62170e$export$4c5dd147b21b9176 = function(locations) {\n    const customIcon = L.icon({\n        iconUrl: \"../img/pin.png\",\n        iconSize: [\n            20,\n            25\n        ],\n        iconAnchor: [\n            10,\n            25\n        ],\n        popupAnchor: [\n            0,\n            -25\n        ]\n    });\n    const map = L.map(\"map\", {\n        center: [\n            34.111745,\n            -118.113491\n        ],\n        zoomControl: false,\n        dragging: false\n    });\n    L.tileLayer(\"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.{ext}\", {\n        attribution: '&copy; <a href=\"https://www.stadiamaps.com/\" target=\"_blank\">Stadia Maps</a> &copy; <a href=\"https://openmaptiles.org/\" target=\"_blank\">OpenMapTiles</a> &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        ext: \"png\"\n    }).addTo(map);\n    const points = locations.map((loc)=>{\n        const point = [\n            loc.coordinates[1],\n            loc.coordinates[0]\n        ];\n        L.marker(point, {\n            icon: customIcon\n        }).addTo(map).bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`, {\n            autoClose: false\n        }).openPopup();\n        return point;\n    });\n    const bounds = L.latLngBounds(points).pad(0.2);\n    map.fitBounds(bounds);\n    map.scrollWheelZoom.disable();\n};\n\n\n\nconst $88e489174e40efdb$export$a3bc9b8ed74fc = function(statusCode) {\n    if (statusCode === 401) {\n        (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"error\", \"Redirecting to login page...\");\n        setTimeout(()=>{\n            window.location.href = \"/login\";\n        }, 3000);\n    }\n};\n\n\n\n\nconst $f66e4040d6569a2e$export$3bf0495508a61ee = async function(payload) {\n    const updateResponse = await fetch(`${process.env.DEV_URL}/api/v1/users/updateMyInfo`, {\n        method: \"PATCH\",\n        body: payload\n    });\n    const updateResult = await updateResponse.json();\n    if (updateResult.status !== \"success\") throw updateResult;\n    (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"success\", \"Updated Data Successfully\");\n    setTimeout(()=>{\n        window.location.href = `${process.env.DEV_URL}/me`;\n    }, 1500);\n};\nconst $f66e4040d6569a2e$export$e2853351e15b7895 = async function(payload) {\n    const body = JSON.stringify(payload);\n    const updateResponse = await fetch(`${process.env.DEV_URL}/api/v1/users/updatePassword`, {\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        method: \"PATCH\",\n        body: body\n    });\n    const updateResult = await updateResponse.json();\n    if (updateResult.status !== \"success\") throw updateResult;\n    (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"success\", \"Updated Data Successfully\");\n};\n\n\nconst $9fd71c92b6f885af$export$c96b48e55d217d63 = async function(id) {\n    const getCheckoutPage = await fetch(`${process.env.DEV_URL}/api/v1/bookings/checkout-session/${id}`, {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n    const responseObject = await getCheckoutPage.json();\n    window.location.href = responseObject.session.url;\n};\n\n\nvar $407eccdc61ba7a94$var$_errorTitle_dataset, $407eccdc61ba7a94$var$_document_getElementById, $407eccdc61ba7a94$var$_document, $407eccdc61ba7a94$var$_document1;\nconst $407eccdc61ba7a94$var$errorTitle = document.querySelector(\".error__title\");\nconst $407eccdc61ba7a94$var$statusCode = Number($407eccdc61ba7a94$var$errorTitle === null || $407eccdc61ba7a94$var$errorTitle === void 0 ? void 0 : ($407eccdc61ba7a94$var$_errorTitle_dataset = $407eccdc61ba7a94$var$errorTitle.dataset) === null || $407eccdc61ba7a94$var$_errorTitle_dataset === void 0 ? void 0 : $407eccdc61ba7a94$var$_errorTitle_dataset.status);\nconst $407eccdc61ba7a94$var$loginForm = document.querySelector(\".form--login\");\nconst $407eccdc61ba7a94$var$locationsString = (($407eccdc61ba7a94$var$_document = document) === null || $407eccdc61ba7a94$var$_document === void 0 ? void 0 : ($407eccdc61ba7a94$var$_document_getElementById = $407eccdc61ba7a94$var$_document.getElementById(\"map\")) === null || $407eccdc61ba7a94$var$_document_getElementById === void 0 ? void 0 : $407eccdc61ba7a94$var$_document_getElementById.dataset.locations) || \"\";\nconst $407eccdc61ba7a94$var$locations = $407eccdc61ba7a94$var$locationsString ? JSON.parse($407eccdc61ba7a94$var$locationsString) : null;\nconst $407eccdc61ba7a94$var$bookTour = ($407eccdc61ba7a94$var$_document1 = document) === null || $407eccdc61ba7a94$var$_document1 === void 0 ? void 0 : $407eccdc61ba7a94$var$_document1.getElementById(\"book-tour\");\nif ($407eccdc61ba7a94$var$bookTour) {\n    const id = $407eccdc61ba7a94$var$bookTour.dataset.tourId;\n    $407eccdc61ba7a94$var$bookTour.addEventListener(\"click\", (e)=>{\n        e.preventDefault();\n        (0, $7dc87b7f457e655a$export$99f7da01d5165667)((0, $9fd71c92b6f885af$export$c96b48e55d217d63), id);\n    });\n}\nif ($407eccdc61ba7a94$var$loginForm) {\n    const password = document.getElementById(\"password\");\n    const email = document.getElementById(\"email\");\n    $407eccdc61ba7a94$var$loginForm === null || $407eccdc61ba7a94$var$loginForm === void 0 ? void 0 : $407eccdc61ba7a94$var$loginForm.addEventListener(\"submit\", (event)=>{\n        event.preventDefault();\n        (0, $7dc87b7f457e655a$export$99f7da01d5165667)((0, $bf5b431e6a69fea8$export$596d806903d1f59e), email.value, password.value);\n    });\n}\nif ($407eccdc61ba7a94$var$locations) (0, $b65541e07a62170e$export$4c5dd147b21b9176)($407eccdc61ba7a94$var$locations);\nif ($407eccdc61ba7a94$var$statusCode) (0, $88e489174e40efdb$export$a3bc9b8ed74fc)($407eccdc61ba7a94$var$statusCode);\nconst $407eccdc61ba7a94$var$updateUserDataForm = document.querySelector(\".form-user-data\");\nif ($407eccdc61ba7a94$var$updateUserDataForm) {\n    const email = document.getElementById(\"email\");\n    const name = document.getElementById(\"name\");\n    const photo = document.getElementById(\"photo\");\n    if (photo) photo.addEventListener(\"change\", function(e) {\n        var _this_files, _this;\n        const img = document.querySelector(\".form__user-photo\");\n        if (!((_this = this) === null || _this === void 0 ? void 0 : (_this_files = _this.files) === null || _this_files === void 0 ? void 0 : _this_files.length)) return;\n        img.src = URL.createObjectURL(this.files[0]);\n        img.onload = function() {\n            URL.revokeObjectURL(img.src);\n        };\n    });\n    $407eccdc61ba7a94$var$updateUserDataForm.addEventListener(\"submit\", (event)=>{\n        event.preventDefault();\n        const form = new FormData();\n        form.append(\"name\", name.value);\n        form.append(\"email\", email.value);\n        if ((photo === null || photo === void 0 ? void 0 : photo.files) && photo.files[0]) form.append(\"photo\", photo.files[0]);\n        (0, $7dc87b7f457e655a$export$99f7da01d5165667)((0, $f66e4040d6569a2e$export$3bf0495508a61ee), form);\n    });\n}\nconst $407eccdc61ba7a94$var$updatePasswordForm = document.querySelector(\".form-user-settings\");\nif ($407eccdc61ba7a94$var$updatePasswordForm) {\n    const currentPassword = document.getElementById(\"password-current\");\n    const password = document.getElementById(\"password\");\n    const passwordConfirm = document.getElementById(\"password-confirm\");\n    $407eccdc61ba7a94$var$updatePasswordForm.addEventListener(\"submit\", async (event)=>{\n        event.preventDefault();\n        await (0, $7dc87b7f457e655a$export$99f7da01d5165667)((0, $f66e4040d6569a2e$export$e2853351e15b7895), {\n            currentPassword: (currentPassword === null || currentPassword === void 0 ? void 0 : currentPassword.value) || \"\",\n            password: (password === null || password === void 0 ? void 0 : password.value) || \"\",\n            passwordConfirm: (passwordConfirm === null || passwordConfirm === void 0 ? void 0 : passwordConfirm.value) || \"\"\n        });\n        currentPassword.value = \"\";\n        password.value = \"\";\n        passwordConfirm.value = \"\";\n    });\n}\n\n\n//# sourceMappingURL=index.js.map\n","import { login } from './login.js';\nimport { displayMap } from './leaflet.js';\nimport { error } from './error.js';\nimport { errorCatcher } from './alerts.js';\nimport { updateData, updatePassword } from './updateInfo.js';\nimport { proceedToCheckout } from './stripe.js';\nconst errorTitle = document.querySelector('.error__title');\nconst statusCode = Number(errorTitle?.dataset?.status);\nconst loginForm = document.querySelector('.form--login');\nconst locationsString = document?.getElementById('map')?.dataset.locations || '';\nconst locations = locationsString ? JSON.parse(locationsString) : null;\nconst bookTour = document?.getElementById('book-tour');\nif (bookTour) {\n    const id = bookTour.dataset.tourId;\n    bookTour.addEventListener('click', (e) => {\n        e.preventDefault();\n        errorCatcher(proceedToCheckout, id);\n    });\n}\nif (loginForm) {\n    const password = document.getElementById('password');\n    const email = document.getElementById('email');\n    loginForm?.addEventListener('submit', (event) => {\n        event.preventDefault();\n        errorCatcher(login, email.value, password.value);\n    });\n}\nif (locations)\n    displayMap(locations);\nif (statusCode)\n    error(statusCode);\nconst updateUserDataForm = document.querySelector('.form-user-data');\nif (updateUserDataForm) {\n    const email = document.getElementById('email');\n    const name = document.getElementById('name');\n    const photo = document.getElementById('photo');\n    if (photo) {\n        photo.addEventListener('change', function (e) {\n            const img = document.querySelector('.form__user-photo');\n            if (!this?.files?.length)\n                return;\n            img.src = URL.createObjectURL(this.files[0]);\n            img.onload = function () {\n                URL.revokeObjectURL(img.src);\n            };\n        });\n    }\n    updateUserDataForm.addEventListener('submit', (event) => {\n        event.preventDefault();\n        const form = new FormData();\n        form.append('name', name.value);\n        form.append('email', email.value);\n        if (photo?.files && photo.files[0]) {\n            form.append('photo', photo.files[0]);\n        }\n        errorCatcher(updateData, form);\n    });\n}\nconst updatePasswordForm = document.querySelector('.form-user-settings');\nif (updatePasswordForm) {\n    const currentPassword = document.getElementById('password-current');\n    const password = document.getElementById('password');\n    const passwordConfirm = document.getElementById('password-confirm');\n    updatePasswordForm.addEventListener('submit', async (event) => {\n        event.preventDefault();\n        await errorCatcher(updatePassword, {\n            currentPassword: currentPassword?.value || '',\n            password: password?.value || '',\n            passwordConfirm: passwordConfirm?.value || '',\n        });\n        currentPassword.value = '';\n        password.value = '';\n        passwordConfirm.value = '';\n    });\n}\n","import { showAlert } from './alerts.js';\nexport const login = async function (email, password) {\n    const body = JSON.stringify({\n        email: email || '',\n        password: password || '',\n    });\n    const loginRequest = await fetch(`${process.env.DEV_URL}/api/v1/users/login`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body,\n    });\n    const loginResult = await loginRequest.json();\n    if (loginResult.error) {\n        throw loginResult;\n    }\n    showAlert('success', 'Logged in successfully');\n    setTimeout(() => {\n        window.location.href = `${process.env.DEV_URL}/`;\n    }, 1500);\n    //   document.cookie = `token=${loginResult.token}; path=/;`;\n};\n","let scheduledHide;\nexport const hideAlert = function () {\n    const alertElement = document.querySelector('.alert');\n    if (alertElement) {\n        alertElement.parentElement?.removeChild(alertElement);\n    }\n};\nexport const showAlert = function (type, message) {\n    if (scheduledHide) {\n        clearTimeout(scheduledHide);\n    }\n    hideAlert();\n    const markup = `<div class=\"alert alert--${type}\">${message}</div>`;\n    document.querySelector('body')?.insertAdjacentHTML('afterbegin', markup);\n    scheduledHide = setTimeout(() => {\n        hideAlert();\n    }, 1500);\n};\nexport const errorCatcher = async function (func, ...argsInput) {\n    try {\n        showAlert('success', 'Please wait...');\n        return await func(...argsInput);\n    }\n    catch (error) {\n        showAlert('error', error.message);\n    }\n};\n","export const displayMap = function (locations) {\n    const customIcon = L.icon({\n        iconUrl: '../img/pin.png',\n        iconSize: [20, 25],\n        iconAnchor: [10, 25],\n        popupAnchor: [0, -25], // Set the popup anchor point, if needed\n    });\n    const map = L.map('map', {\n        center: [34.111745, -118.113491],\n        zoomControl: false,\n        dragging: false,\n    });\n    L.tileLayer('https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.{ext}', {\n        attribution: '&copy; <a href=\"https://www.stadiamaps.com/\" target=\"_blank\">Stadia Maps</a> &copy; <a href=\"https://openmaptiles.org/\" target=\"_blank\">OpenMapTiles</a> &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        ext: 'png',\n    }).addTo(map);\n    const points = locations.map((loc) => {\n        const point = [loc.coordinates[1], loc.coordinates[0]];\n        L.marker(point, { icon: customIcon })\n            .addTo(map)\n            .bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`, {\n            autoClose: false,\n        })\n            .openPopup();\n        return point;\n    });\n    const bounds = L.latLngBounds(points).pad(0.2);\n    map.fitBounds(bounds);\n    map.scrollWheelZoom.disable();\n};\n","import { showAlert } from './alerts';\nexport const error = function (statusCode) {\n    if (statusCode === 401) {\n        showAlert('error', 'Redirecting to login page...');\n        setTimeout(() => {\n            window.location.href = '/login';\n        }, 3000);\n    }\n};\n","import { showAlert } from './alerts';\nexport const updateData = async function (payload) {\n    const updateResponse = await fetch(`${process.env.DEV_URL}/api/v1/users/updateMyInfo`, {\n        method: 'PATCH',\n        body: payload,\n    });\n    const updateResult = await updateResponse.json();\n    if (updateResult.status !== 'success')\n        throw updateResult;\n    showAlert('success', 'Updated Data Successfully');\n    setTimeout(() => {\n        window.location.href = `${process.env.DEV_URL}/me`;\n    }, 1500);\n};\nexport const updatePassword = async function (payload) {\n    const body = JSON.stringify(payload);\n    const updateResponse = await fetch(`${process.env.DEV_URL}/api/v1/users/updatePassword`, {\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        method: 'PATCH',\n        body,\n    });\n    const updateResult = await updateResponse.json();\n    if (updateResult.status !== 'success')\n        throw updateResult;\n    showAlert('success', 'Updated Data Successfully');\n};\n","export const proceedToCheckout = async function (id) {\n    const getCheckoutPage = await fetch(`${process.env.DEV_URL}/api/v1/bookings/checkout-session/${id}`, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n    });\n    const responseObject = await getCheckoutPage.json();\n    window.location.href = responseObject.session.url;\n};\n"],"names":["$407eccdc61ba7a94$var$_errorTitle_dataset","$407eccdc61ba7a94$var$_document_getElementById","$407eccdc61ba7a94$var$_document","$407eccdc61ba7a94$var$_document1","$7dc87b7f457e655a$var$scheduledHide","$7dc87b7f457e655a$export$516836c6a9dfc573","_alertElement_parentElement","alertElement","document","querySelector","parentElement","removeChild","$7dc87b7f457e655a$export$de026b00723010c1","type","message","_document_querySelector","clearTimeout","markup","insertAdjacentHTML","setTimeout","$7dc87b7f457e655a$export$99f7da01d5165667","func","argsInput","error","$bf5b431e6a69fea8$export$596d806903d1f59e","email","password","body","JSON","stringify","loginRequest","fetch","process","env","DEV_URL","method","headers","loginResult","json","window","location","href","$f66e4040d6569a2e$export$3bf0495508a61ee","payload","updateResponse","updateResult","status","$f66e4040d6569a2e$export$e2853351e15b7895","$9fd71c92b6f885af$export$c96b48e55d217d63","id","getCheckoutPage","responseObject","session","url","$407eccdc61ba7a94$var$errorTitle","$407eccdc61ba7a94$var$statusCode","Number","dataset","$407eccdc61ba7a94$var$loginForm","$407eccdc61ba7a94$var$locationsString","getElementById","locations","$407eccdc61ba7a94$var$locations","parse","$407eccdc61ba7a94$var$bookTour","tourId","addEventListener","e","preventDefault","event","value","customIcon","L","icon","iconUrl","iconSize","iconAnchor","popupAnchor","map","center","zoomControl","dragging","tileLayer","attribution","ext","addTo","points","loc","point","coordinates","marker","bindPopup","day","description","autoClose","openPopup","bounds","latLngBounds","pad","fitBounds","scrollWheelZoom","disable","statusCode","$407eccdc61ba7a94$var$updateUserDataForm","name","photo","_this_files","img","_this","files","length","src","URL","createObjectURL","onload","revokeObjectURL","form","FormData","append","$407eccdc61ba7a94$var$updatePasswordForm","currentPassword","passwordConfirm"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}